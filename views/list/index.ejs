<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
		<title>WishListings</title>
	</head>
	<body>
		<%- include('../partials/nav.ejs') %>
		<nav>
            <a href="/wishlist/new">Add to my List</a>
        </nav>
        <ul class="indexWishList" style="list-style-type: none;">
			<% wishes.forEach(wish => { %>
			<li class="indexList" id="<%= wish.id %>">
				<a href="/wishlist/<%= wish._id %>"><% if(wish.isPurchased == true){ %><img class="wishBow" src="/assets/Red_Bow_Crop.png" width="300" height="225"/><% } %><img class="wishIndex"<% if(wish.isPurchased == true){ %>style="filter: grayscale(100%);"<% } %>src="<%= wish.img %>" alt="<%= wish.name %>" width="300" height="300"/>
				</a>
            <br> <%= wish.name %> <br>
            <%= wish.owner %> 
			<% if(wish.isPurchased == false) { %> 
				<button class="cartButton cartAdd">Add to Cart</button>
				<form style="display: none; visibility: visible;" <%if(wish.isPurchased == true) { %>
                  <% } %> 
            action="/wishlist/<%= wish._id %>/buy?_method=PUT" method="POST">
			    	<input hidden type="checkbox" name="isPurchased" checked>
                	<input type="submit" id="<%=wish._id %>" class="Buy" value="Buy">
				</form>
			<% } %>
            </li>
			<% }); %>
		</ul>
        <ul class="cart" style="list-style-type: none;"></ul>
		<%- include('../partials/footer.ejs') %>
	</body>
	<script>
		$('.cartButton').click(function (Wish) {
			$(this).parent().appendTo('.cart');
			$(this).toggle();
			$(this.nextElementSibling).toggle();
		});
	</script>
</html>